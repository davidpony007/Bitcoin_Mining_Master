# æ•°æ®åº“åŒæ­¥æ“ä½œæŒ‡å—

## ğŸ“Š äº‘ç«¯æ•°æ®åº“ç»“æ„

å·²æˆåŠŸä»é˜¿é‡Œäº‘æœåŠ¡å™¨å¯¼å‡ºæ•°æ®åº“ç»“æ„ï¼ŒåŒ…å«ä»¥ä¸‹ **13 ä¸ªè¡¨**ï¼š

1. âœ… `bitcoin_transaction_records` - æ¯”ç‰¹å¸äº¤æ˜“è®°å½•
2. âœ… `country_config` - å›½å®¶é…ç½®è¡¨ï¼ˆæ—§ç‰ˆï¼‰
3. âœ… `country_mining_config` - å›½å®¶æŒ–çŸ¿é…ç½®è¡¨
4. âœ… `free_contract_records` - å…è´¹åˆçº¦è®°å½•
5. âœ… `invitation_rebate` - é‚€è¯·è¿”åˆ©
6. âœ… `invitation_relationship` - é‚€è¯·å…³ç³»
7. âœ… `mining_contracts` - æŒ–çŸ¿åˆçº¦
8. âœ… `paid_products_list` - ä»˜è´¹äº§å“åˆ—è¡¨
9. âœ… `user_information` - ç”¨æˆ·ä¿¡æ¯
10. âœ… `user_log` - ç”¨æˆ·æ—¥å¿—
11. âœ… `user_orders` - ç”¨æˆ·è®¢å•
12. âœ… `user_status` - ç”¨æˆ·çŠ¶æ€
13. âœ… `withdrawal_records` - æç°è®°å½•

## ğŸ”§ åŒæ­¥æ“ä½œæ­¥éª¤

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬ï¼ˆæ¨èï¼‰

#### 1. æ£€æŸ¥æœ¬åœ°æ•°æ®åº“å½“å‰çŠ¶æ€

```bash
cd "/Users/davidpony/Desktop/Bitcoin Mining Master/backend"
./check-local-db.sh
```

è¾“å…¥æœ¬åœ° MySQL root å¯†ç åï¼Œä¼šæ˜¾ç¤ºï¼š
- æœ¬åœ°æ˜¯å¦å­˜åœ¨ `bitcoin_mining_master` æ•°æ®åº“
- å¦‚æœå­˜åœ¨ï¼Œæ˜¾ç¤ºå½“å‰çš„è¡¨åˆ—è¡¨

#### 2. å¯¼å…¥äº‘ç«¯æ•°æ®åº“ç»“æ„

```bash
./import-database.sh
```

æ­¤è„šæœ¬ä¼šï¼š
1. æ˜¾ç¤ºäº‘ç«¯æ•°æ®åº“çš„è¡¨åˆ—è¡¨
2. è­¦å‘Šä¼šåˆ é™¤æœ¬åœ°æ•°æ®
3. è¯·æ±‚ç¡®è®¤ï¼ˆè¾“å…¥ `yes` ç»§ç»­ï¼‰
4. å¯¼å…¥æ•°æ®åº“ç»“æ„
5. éªŒè¯å¯¼å…¥ç»“æœ

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨å¯¼å…¥

å¦‚æœä½ æ›´å–œæ¬¢æ‰‹åŠ¨æ“ä½œï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ MySQL å‘½ä»¤ï¼š

```bash
mysql -u root -p < "/Users/davidpony/Desktop/Bitcoin Mining Master/backend/cloud-database-schema.sql"
```

ç„¶åéªŒè¯ï¼š

```bash
mysql -u root -p -e "USE bitcoin_mining_master; SHOW TABLES;"
```

## âš ï¸ é‡è¦æç¤º

### æ•°æ®å¤‡ä»½
å¦‚æœæœ¬åœ°æ•°æ®åº“å·²æœ‰æ•°æ®ï¼Œè¯·å…ˆå¤‡ä»½ï¼š

```bash
mysqldump -u root -p bitcoin_mining_master > backup_$(date +%Y%m%d_%H%M%S).sql
```

### æ¢å¤å¤‡ä»½
å¦‚éœ€æ¢å¤å¤‡ä»½ï¼š

```bash
mysql -u root -p bitcoin_mining_master < backup_20231217_235619.sql
```

## ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶

- âœ… `cloud-database-schema.sql` - äº‘ç«¯æ•°æ®åº“å®Œæ•´ç»“æ„ï¼ˆ296 è¡Œï¼‰
- âœ… `sync-database-schema.js` - Node.js åŒæ­¥è„šæœ¬
- âœ… `import-database.sh` - è‡ªåŠ¨å¯¼å…¥è„šæœ¬
- âœ… `check-local-db.sh` - æœ¬åœ°æ•°æ®åº“æ£€æŸ¥è„šæœ¬

## ğŸ” éªŒè¯åŒæ­¥ç»“æœ

å¯¼å…¥å®Œæˆåï¼Œå¯ä»¥è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯ï¼š

```bash
# æ–¹æ³• 1ï¼šä½¿ç”¨ MySQL å‘½ä»¤
mysql -u root -p -e "
  SELECT 
    TABLE_NAME, 
    TABLE_ROWS, 
    ROUND((DATA_LENGTH + INDEX_LENGTH) / 1024 / 1024, 2) AS 'Size (MB)'
  FROM information_schema.TABLES 
  WHERE TABLE_SCHEMA = 'bitcoin_mining_master'
  ORDER BY TABLE_NAME;
"

# æ–¹æ³• 2ï¼šä½¿ç”¨ Node.js æµ‹è¯•è¿æ¥
node test_mysql_only.js
```

## ğŸ¯ åç»­æ­¥éª¤

åŒæ­¥å®Œæˆåï¼š

1. âœ… æ›´æ–°æœ¬åœ°ç¯å¢ƒå˜é‡ï¼ˆå¦‚æœéœ€è¦ï¼‰
2. âœ… è¿è¡Œæ•°æ®åº“è¿ç§»ï¼ˆå¦‚æœæœ‰æ–°çš„ migrationï¼‰
3. âœ… æµ‹è¯•åç«¯æœåŠ¡è¿æ¥
4. âœ… éªŒè¯æ‰€æœ‰ API åŠŸèƒ½

## ğŸ“ å¸¸è§é—®é¢˜

### Q: æç¤º"Access denied for user 'root'"ï¼Ÿ
**A:** è¯·ç¡®ä¿ï¼š
- MySQL æœåŠ¡æ­£åœ¨è¿è¡Œ
- ä½¿ç”¨æ­£ç¡®çš„ root å¯†ç 
- æ£€æŸ¥æœ‰å¤šä¸ª MySQL å®ä¾‹çš„æƒ…å†µ

### Q: å¯¼å…¥æ—¶æç¤ºé”™è¯¯ï¼Ÿ
**A:** æ£€æŸ¥ï¼š
- SQL æ–‡ä»¶æ˜¯å¦å®Œæ•´
- MySQL ç‰ˆæœ¬å…¼å®¹æ€§
- ç£ç›˜ç©ºé—´æ˜¯å¦å……è¶³

### Q: æƒ³åªå¯¼å…¥éƒ¨åˆ†è¡¨ï¼Ÿ
**A:** ç¼–è¾‘ `cloud-database-schema.sql` æ–‡ä»¶ï¼Œåˆ é™¤ä¸éœ€è¦çš„è¡¨å®šä¹‰

## ğŸ“Š æ•°æ®åº“é…ç½®å¯¹æ¯”

### äº‘ç«¯é…ç½®
```javascript
host: '47.79.232.189'
port: 3306
user: 'bitcoin_mining_master'
database: 'bitcoin_mining_master'
```

### æœ¬åœ°é…ç½®
```javascript
host: '127.0.0.1'
port: 3306
user: 'root'
database: 'bitcoin_mining_master'
```

## ğŸš€ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# æ£€æŸ¥æœ¬åœ°æ•°æ®åº“
./check-local-db.sh

# å¯¼å…¥äº‘ç«¯ç»“æ„
./import-database.sh

# æˆ–ç›´æ¥å¯¼å…¥
mysql -u root -p < cloud-database-schema.sql

# éªŒè¯å¯¼å…¥
mysql -u root -p -e "USE bitcoin_mining_master; SHOW TABLES;"
```

---

**ç”Ÿæˆæ—¶é—´**: 2025-12-17 23:56:19  
**äº‘ç«¯æœåŠ¡å™¨**: 47.79.232.189  
**æ•°æ®åº“åç§°**: bitcoin_mining_master
